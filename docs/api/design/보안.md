# ğŸ”’ ë³´ì•ˆ

## ì¸ì¦ (Authentication)

**JWT Bearer Token ì‚¬ìš©:**

```http
GET /api/v1/users
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**í† í° êµ¬ì¡°:**
```json
{
  "sub": "01ARZ3NDEKTSV4RRFFQ69G5FAV",  // User ID
  "username": "admin",
  "roles": ["ROLE_ADMIN", "ROLE_COMPLIANCE_OFFICER"],
  "permissions": ["user:read", "user:write", "policy:approve"],
  "iat": 1673600000,
  "exp": 1673603600
}
```

## ì¸ê°€ (Authorization)

**Role-Based Access Control (RBAC):**

```http
# Adminë§Œ ì ‘ê·¼ ê°€ëŠ¥
GET /api/v1/admin/users
Authorization: Bearer {token with ROLE_ADMIN}

# Permission ì²´í¬
POST /api/v1/policies/{id}/approve
Authorization: Bearer {token with policy:approve permission}
```

## CORS ì„¤ì •

```yaml
# application.yml
cors:
  allowed-origins:
    - http://localhost:3000       # ê°œë°œ í™˜ê²½
    - https://app.inspecthub.com  # í”„ë¡œë•ì…˜
  allowed-methods:
    - GET
    - POST
    - PUT
    - PATCH
    - DELETE
  allowed-headers:
    - Authorization
    - Content-Type
  exposed-headers:
    - Location
  max-age: 3600
```

## Rate Limiting

**ìš”ì²­ ì œí•œ:**
```
100 requests per minute per user
1000 requests per hour per user
```

**ì´ˆê³¼ ì‹œ ì‘ë‹µ:**
```http
HTTP/1.1 429 Too Many Requests
Retry-After: 60
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 0
X-RateLimit-Reset: 1673603600

{
  "success": false,
  "message": "Rate limit exceeded. Please try again later.",
  "errorCode": "RATE_LIMIT_EXCEEDED"
}
```

## Input Validation

**ëª¨ë“  ì…ë ¥ ê²€ì¦:**
- Request Body ê²€ì¦ (Jakarta Validation)
- Query Parameter ê²€ì¦
- Path Variable ê²€ì¦ (ULID í˜•ì‹)

```java
@PostMapping("/users")
public ResponseEntity<ApiResponse<UserResponse>> createUser(
    @Valid @RequestBody CreateUserRequest request  // âœ… @Valid
) {
    // ...
}
```

## SQL Injection ë°©ì§€

**MyBatis Parameterized Queries:**
```xml
<!-- âœ… Good - Parameterized -->
<select id="findByEmail" resultType="User">
    SELECT * FROM "user" WHERE email = #{email}
</select>

<!-- âŒ Bad - String concatenation -->
<select id="findByEmail" resultType="User">
    SELECT * FROM "user" WHERE email = '${email}'
</select>
```

---
