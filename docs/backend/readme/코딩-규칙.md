# ğŸ“œ ì½”ë”© ê·œì¹™

## 1. ëª…ëª… ê·œì¹™

### Package Naming
```
com.inspecthub.{module}.{layer}
```

**Examples:**
- `com.inspecthub.policy.controller`
- `com.inspecthub.policy.service`
- `com.inspecthub.policy.dto`
- `com.inspecthub.policy.mapper`

### Class Naming

| íƒ€ì… | ëª…ëª… ê·œì¹™ | ì˜ˆì‹œ |
|------|-----------|------|
| Controller | `*Controller` | `PolicyController` |
| Service | `*Service` | `PolicyService` |
| Mapper (Interface) | `*Mapper` | `PolicyMapper` |
| DTO (Request) | `*Request` | `CreatePolicyRequest` |
| DTO (Response) | `*Response` | `PolicyResponse` |
| Entity | PascalCase | `Policy`, `User` |
| Exception | `*Exception` | `PolicyNotFoundException` |

### Method Naming

| ìš©ë„ | ëª…ëª… ê·œì¹™ | ì˜ˆì‹œ |
|------|-----------|------|
| ì¡°íšŒ (ë‹¨ê±´) | `get*`, `find*` | `getUserById`, `findPolicyByVersion` |
| ì¡°íšŒ (ëª©ë¡) | `list*`, `findAll*` | `listPolicies`, `findAllActiveUsers` |
| ìƒì„± | `create*` | `createPolicy`, `createUser` |
| ìˆ˜ì • | `update*` | `updatePolicy`, `updateStatus` |
| ì‚­ì œ | `delete*` | `deletePolicy`, `softDelete` |
| ê²€ì¦ | `validate*`, `is*`, `has*` | `validatePolicy`, `isActive`, `hasPermission` |

### Variable Naming

```java
// âœ… Good - camelCase, ëª…í™•í•œ ì˜ë¯¸
String userName;
LocalDateTime createdAt;
List<Policy> activePolicies;
boolean isApproved;

// âŒ Bad - ëª¨í˜¸í•œ ì´ë¦„, ì•½ì–´ ë‚¨ìš©
String un;
LocalDateTime dt;
List<Policy> pList;
boolean flag;
```

## 2. ì½”ë“œ ìŠ¤íƒ€ì¼

### Indentation & Braces
```java
// âœ… Good - 4 spaces, braces on same line
public class PolicyService {
    public void createPolicy(PolicyRequest request) {
        if (request.isValid()) {
            // logic
        }
    }
}

// âŒ Bad - tabs, inconsistent braces
public class PolicyService 
{
	public void createPolicy(PolicyRequest request) 
	{
		if (request.isValid())
		{
			// logic
		}
	}
}
```

### Line Length
- **ìµœëŒ€ 120ì** (ê¶Œì¥)
- ë„ˆë¬´ ê¸´ ì¤„ì€ ë…¼ë¦¬ì  ë‹¨ìœ„ë¡œ ë¶„ë¦¬

```java
// âœ… Good
String result = someService
    .processData(param1, param2)
    .transform()
    .validate();

// âŒ Bad - í•œ ì¤„ì— ë„ˆë¬´ ë§ì€ ë‚´ìš©
String result = someService.processData(param1, param2).transform().validate().save();
```

### Import Organization
```java
// âœ… Good - ê·¸ë£¹ë³„ ì •ë ¬
import java.util.List;
import java.util.Map;

import org.springframework.stereotype.Service;

import com.inspecthub.common.dto.ApiResponse;
import com.inspecthub.policy.dto.PolicyRequest;

// âŒ Bad - ì •ë ¬ ì—†ìŒ, wildcard ì‚¬ìš©
import java.util.*;
import com.inspecthub.policy.dto.PolicyRequest;
import org.springframework.stereotype.Service;
```

## 3. Annotation ìˆœì„œ

```java
// âœ… Good - ì¼ê´€ëœ ìˆœì„œ
@RestController
@RequestMapping("/api/v1/policies")
@Tag(name = "Policy", description = "Policy API")
@RequiredArgsConstructor
@Slf4j
public class PolicyController {
    
    @GetMapping("/{id}")
    @Operation(summary = "Get Policy", description = "Retrieve policy by ID")
    public ResponseEntity<ApiResponse<PolicyResponse>> getPolicy(
        @PathVariable("id") String id
    ) {
        // ...
    }
}

// Class-level annotations order:
// 1. Stereotype (@RestController, @Service, @Repository)
// 2. Mapping (@RequestMapping)
// 3. Documentation (@Tag)
// 4. Lombok (@RequiredArgsConstructor, @Slf4j)
// 5. Other

// Method-level annotations order:
// 1. Mapping (@GetMapping, @PostMapping)
// 2. Documentation (@Operation)
// 3. Security (@PreAuthorize)
// 4. Transaction (@Transactional)
// 5. Other
```

## 4. ì£¼ì„ ê·œì¹™

### JavaDoc (Public API)
```java
/**
 * Creates a new policy snapshot.
 * 
 * @param request the policy creation request
 * @return the created policy response
 * @throws PolicyValidationException if policy validation fails
 */
@PostMapping
public ResponseEntity<ApiResponse<PolicyResponse>> createPolicy(
    @Valid @RequestBody CreatePolicyRequest request
) {
    // implementation
}
```

### Inline Comments
```java
// âœ… Good - Why, not what
// Use cached value to avoid expensive database query
Policy cached = cache.get(policyId);

// âŒ Bad - Obvious from code
// Get policy from cache
Policy cached = cache.get(policyId);
```

### TODO/FIXME
```java
// TODO(username): Implement pagination for large result sets
// FIXME(username): Race condition when updating status concurrently
```

## 5. Exception Handling

```java
// âœ… Good - Specific exceptions, meaningful messages
@Service
@RequiredArgsConstructor
public class PolicyService {
    
    public Policy getPolicy(String id) {
        return policyMapper.findById(id)
            .orElseThrow(() -> new PolicyNotFoundException(
                "Policy not found with id: " + id
            ));
    }
    
    public void validatePolicy(Policy policy) {
        if (policy.getEffectiveTo().isBefore(policy.getEffectiveFrom())) {
            throw new PolicyValidationException(
                "Effective end date must be after start date"
            );
        }
    }
}

// âŒ Bad - Generic exceptions, no context
public Policy getPolicy(String id) {
    Policy policy = policyMapper.findById(id);
    if (policy == null) {
        throw new RuntimeException("Error");
    }
    return policy;
}
```

## 6. Logging

```java
@Service
@Slf4j
@RequiredArgsConstructor
public class PolicyService {
    
    public Policy createPolicy(CreatePolicyRequest request) {
        log.info("Creating policy: type={}, version={}", 
            request.getType(), request.getVersion());
        
        try {
            Policy policy = // ... create policy
            log.info("Policy created successfully: id={}", policy.getId());
            return policy;
        } catch (Exception e) {
            log.error("Failed to create policy: request={}", request, e);
            throw e;
        }
    }
}

// Log Levels:
// - TRACE: Very detailed, rarely used
// - DEBUG: Development debugging
// - INFO: Important business events
// - WARN: Potential issues
// - ERROR: Error conditions
```

## 7. Constant Values

```java
// âœ… Good - Constants in dedicated class or interface
public class PolicyConstants {
    public static final String TYPE_STR = "STR";
    public static final String TYPE_CTR = "CTR";
    public static final int DEFAULT_PAGE_SIZE = 20;
    public static final int MAX_VERSION_HISTORY = 100;
}

// âŒ Bad - Magic numbers/strings
if (policy.getType().equals("STR")) { // What is "STR"?
    // ...
}
```

---
