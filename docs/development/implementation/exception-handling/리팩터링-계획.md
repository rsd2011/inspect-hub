# 🔧 리팩터링 계획

## Phase 1: ErrorCode 통합

**목표**: 분산된 에러 코드를 `ErrorCode` enum으로 통합

**작업 항목:**
- [ ] 현재 사용 중인 모든 에러 코드 수집
- [ ] `ErrorCode` enum에 통합 (카테고리별 분류)
- [ ] HTTP 상태 코드 매핑 검증
- [ ] 중복 에러 코드 제거

## Phase 2: BusinessException 표준화

**목표**: 모든 Service 레이어에서 `BusinessException` 사용

**작업 항목:**
- [ ] 직접 문자열 에러 코드 사용 제거
- [ ] `ErrorCode` enum 기반 예외 발생으로 변경
- [ ] `GlobalExceptionHandler`에서 `ErrorCode` 매핑 적용

## Phase 3: 도메인 규칙 검증 강화

**목표**: Entity/VO에서 유효성 검증 추가

**작업 항목:**
- [ ] `DomainException` 도입
- [ ] Entity 생성자에서 유효성 검증 추가
- [ ] 상태 전이 메서드에서 규칙 검증 추가
- [ ] Value Object 불변성 보장

## Phase 4: Result 패턴 도입

**목표**: 선택적 기능에 `Result<T>` 패턴 적용

**작업 항목:**
- [ ] `Result<T>` 타입 정의
- [ ] 검색/추천 등 빈 결과 가능한 API에 적용
- [ ] Controller에서 Result 처리 패턴 구현

## Phase 5: 외부 API 안정성 강화

**목표**: Resilience4j Circuit Breaker + Spring Retry 적용

**작업 항목:**
- [ ] Resilience4j 의존성 추가
- [ ] Circuit Breaker 설정 (application.yml)
- [ ] AD 인증, SSO 호출에 Circuit Breaker 적용
- [ ] Spring Retry + Fallback 패턴 적용

---
