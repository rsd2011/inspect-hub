# 컴포넌트 테스트

## Atom 컴포넌트 테스트

```typescript
// shared/ui/atoms/Button.test.ts
import { describe, it, expect, vi } from 'vitest'
import { mount } from '@vue/test-utils'
import Button from './Button.vue'

describe('Button', () => {
  it('기본 렌더링', () => {
    const wrapper = mount(Button, {
      props: { label: '저장' }
    })
    
    expect(wrapper.text()).toBe('저장')
    expect(wrapper.find('button').exists()).toBe(true)
  })
  
  it('클릭 이벤트 emit', async () => {
    const wrapper = mount(Button, {
      props: { label: '클릭' }
    })
    
    await wrapper.find('button').trigger('click')
    
    expect(wrapper.emitted('click')).toHaveLength(1)
  })
  
  it('disabled 상태에서 클릭 불가', async () => {
    const wrapper = mount(Button, {
      props: {
        label: '버튼',
        disabled: true
      }
    })
    
    await wrapper.find('button').trigger('click')
    
    expect(wrapper.emitted('click')).toBeUndefined()
    expect(wrapper.find('button').attributes('disabled')).toBeDefined()
  })
  
  it('loading 상태 표시', () => {
    const wrapper = mount(Button, {
      props: {
        label: '저장',
        loading: true
      }
    })
    
    expect(wrapper.find('.spinner').exists()).toBe(true)
    expect(wrapper.find('button').attributes('disabled')).toBeDefined()
  })
  
  it('severity variant 적용', () => {
    const variants = ['primary', 'secondary', 'danger', 'success']
    
    variants.forEach(severity => {
      const wrapper = mount(Button, {
        props: { label: '버튼', severity }
      })
      
      expect(wrapper.find('button').classes()).toContain(`btn-${severity}`)
    })
  })
  
  it('아이콘 슬롯 렌더링', () => {
    const wrapper = mount(Button, {
      props: { label: '저장' },
      slots: {
        icon: '<i class="pi pi-check"></i>'
      }
    })
    
    expect(wrapper.find('.pi-check').exists()).toBe(true)
  })
})
```

## Molecule 컴포넌트 테스트

```typescript
// shared/ui/molecules/FormField.test.ts
import { describe, it, expect } from 'vitest'
import { mount } from '@vue/test-utils'
import FormField from './FormField.vue'

describe('FormField', () => {
  it('label과 input 렌더링', () => {
    const wrapper = mount(FormField, {
      props: {
        label: '사용자명',
        modelValue: '',
        name: 'username'
      }
    })
    
    expect(wrapper.find('label').text()).toBe('사용자명')
    expect(wrapper.find('input').exists()).toBe(true)
  })
  
  it('v-model 양방향 바인딩', async () => {
    const wrapper = mount(FormField, {
      props: {
        label: '이메일',
        modelValue: '',
        'onUpdate:modelValue': (value: string) => wrapper.setProps({ modelValue: value })
      }
    })
    
    const input = wrapper.find('input')
    await input.setValue('test@example.com')
    
    expect(wrapper.emitted('update:modelValue')).toBeTruthy()
    expect(wrapper.emitted('update:modelValue')![0]).toEqual(['test@example.com'])
  })
  
  it('required 표시', () => {
    const wrapper = mount(FormField, {
      props: {
        label: '비밀번호',
        modelValue: '',
        required: true
      }
    })
    
    expect(wrapper.find('.required-indicator').exists()).toBe(true)
    expect(wrapper.find('label').text()).toContain('*')
  })
  
  it('에러 메시지 표시', () => {
    const errorMessage = '이메일 형식이 올바르지 않습니다'
    const wrapper = mount(FormField, {
      props: {
        label: '이메일',
        modelValue: 'invalid',
        error: errorMessage
      }
    })
    
    expect(wrapper.find('.error-message').text()).toBe(errorMessage)
    expect(wrapper.find('input').classes()).toContain('error')
  })
  
  it('도움말 텍스트 표시', () => {
    const helpText = '8자 이상 입력하세요'
    const wrapper = mount(FormField, {
      props: {
        label: '비밀번호',
        modelValue: '',
        help: helpText
      }
    })
    
    expect(wrapper.find('.help-text').text()).toBe(helpText)
  })
  
  it('disabled 상태', () => {
    const wrapper = mount(FormField, {
      props: {
        label: '입력',
        modelValue: 'value',
        disabled: true
      }
    })
    
    expect(wrapper.find('input').attributes('disabled')).toBeDefined()
  })
})
```

## Testing Library를 사용한 컴포넌트 테스트

```typescript
// shared/ui/organisms/LoginForm.test.ts
import { describe, it, expect, vi } from 'vitest'
import { render, screen, fireEvent, waitFor } from '@testing-library/vue'
import userEvent from '@testing-library/user-event'
import LoginForm from './LoginForm.vue'

describe('LoginForm', () => {
  it('로그인 폼 렌더링', () => {
    render(LoginForm)
    
    expect(screen.getByLabelText('사용자명')).toBeInTheDocument()
    expect(screen.getByLabelText('비밀번호')).toBeInTheDocument()
    expect(screen.getByRole('button', { name: '로그인' })).toBeInTheDocument()
  })
  
  it('사용자 입력 처리', async () => {
    const user = userEvent.setup()
    render(LoginForm)
    
    const usernameInput = screen.getByLabelText('사용자명')
    const passwordInput = screen.getByLabelText('비밀번호')
    
    await user.type(usernameInput, 'testuser')
    await user.type(passwordInput, 'password123')
    
    expect(usernameInput).toHaveValue('testuser')
    expect(passwordInput).toHaveValue('password123')
  })
  
  it('폼 제출 시 onSubmit 호출', async () => {
    const user = userEvent.setup()
    const handleSubmit = vi.fn()
    
    render(LoginForm, {
      props: {
        onSubmit: handleSubmit
      }
    })
    
    await user.type(screen.getByLabelText('사용자명'), 'admin')
    await user.type(screen.getByLabelText('비밀번호'), 'admin123')
    await user.click(screen.getByRole('button', { name: '로그인' }))
    
    await waitFor(() => {
      expect(handleSubmit).toHaveBeenCalledWith({
        username: 'admin',
        password: 'admin123'
      })
    })
  })
  
  it('빈 필드로 제출 시 검증 에러', async () => {
    const user = userEvent.setup()
    render(LoginForm)
    
    await user.click(screen.getByRole('button', { name: '로그인' }))
    
    await waitFor(() => {
      expect(screen.getByText('사용자명을 입력하세요')).toBeInTheDocument()
      expect(screen.getByText('비밀번호를 입력하세요')).toBeInTheDocument()
    })
  })
  
  it('로그인 중 로딩 상태 표시', async () => {
    const user = userEvent.setup()
    const slowSubmit = vi.fn(() => new Promise(resolve => setTimeout(resolve, 1000)))
    
    render(LoginForm, {
      props: {
        onSubmit: slowSubmit
      }
    })
    
    await user.type(screen.getByLabelText('사용자명'), 'admin')
    await user.type(screen.getByLabelText('비밀번호'), 'admin123')
    await user.click(screen.getByRole('button', { name: '로그인' }))
    
    expect(screen.getByRole('button', { name: '로그인 중...' })).toBeDisabled()
    expect(screen.getByTestId('loading-spinner')).toBeInTheDocument()
  })
})
```

---
